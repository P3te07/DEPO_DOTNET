@using System.Text.Json
@{
    var userJson = Context.Session.GetString("_CurrentUser");
    if (userJson != null)
    {
        var userData = JsonSerializer.Deserialize<Dictionary<string, JsonElement>>(userJson);
        var rol = userData["Rol"].GetString();
        var numeComplet = userData["NumeComplet"].GetString();

        <div class="user-info p-3 mb-3 bg-light rounded">
            <h6 class="mb-1">@numeComplet</h6>
            <small class="text-muted">@rol</small>
        </div>

        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link" href="/Dashboard">
                    <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                </a>
            </li>

            @if (rol == "SuperAdmin")
            {
                <li class="nav-item">
                    <a class="nav-link" href="/Companie">
                        <i class="fas fa-building me-2"></i>Companii
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/Depozit">
                        <i class="fas fa-warehouse me-2"></i>Depozite
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/User">
                        <i class="fas fa-users me-2"></i>Utilizatori
                    </a>
                </li>
            }

            @if (rol == "DirectorCompanie")
            {
                <li class="nav-item">
                    <a class="nav-link" href="/Depozit">
                        <i class="fas fa-warehouse me-2"></i>Depozite
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/User">
                        <i class="fas fa-users me-2"></i>Utilizatori
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/Marfa">
                        <i class="fas fa-boxes me-2"></i>Marfuri
                    </a>
                </li>
            }

            @if (rol == "ResponsabilDepozit" || rol == "DirectorCompanie" || rol == "SuperAdmin")
            {
                <li class="nav-item">
                    <a class="nav-link" href="/Marfa">
                        <i class="fas fa-boxes me-2"></i>Inventar
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/Tranzactie">
                        <i class="fas fa-exchange-alt me-2"></i>Tranzactii
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/Rapoarte">
                        <i class="fas fa-chart-bar me-2"></i>Rapoarte
                    </a>
                </li>
            }

            @if (rol == "Muncitor")
            {
                <li class="nav-item">
                    <a class="nav-link" href="/Tranzactie">
                        <i class="fas fa-tasks me-2"></i>Sarcini
                    </a>
                </li>
            }
        </ul>
    }
}